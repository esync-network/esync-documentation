<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-developer-docs/ecredits-widget-api" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">eCredits Widget API | eSync Network</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.esync.network/docs/developer-docs/ecredits-widget-api"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="eCredits Widget API | eSync Network"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.esync.network/docs/developer-docs/ecredits-widget-api"><link data-rh="true" rel="alternate" href="https://docs.esync.network/docs/developer-docs/ecredits-widget-api" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.esync.network/docs/developer-docs/ecredits-widget-api" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e29c4b7e.css">
<script src="/assets/js/runtime~main.b15b1838.js" defer="defer"></script>
<script src="/assets/js/main.34461cf4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="eSync Network" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="eSync Network" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Home</b></a><a class="navbar__item navbar__link" href="/docs/whitepaper/">Whitepaper</a><a class="navbar__item navbar__link" href="/docs/ecosystem/">Ecosystem</a><a class="navbar__item navbar__link" href="/docs/tools/">Tools</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/developer-docs/">Developer Docs</a><a class="navbar__item navbar__link" href="/docs/validators/">Validators</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/esync-network" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/developer-docs/">Developer Docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/developer-docs/erc-20">Create an ERC-20 Token</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/developer-docs/ecredits-widget-api">eCredits Widget API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/developer-docs/smart-contract-analysis-tools">Smart Contract Analysis Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/developer-docs/security-audits">Security and Audit Reports</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/developer-docs/bug_bounty">Bug Bounty Program</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">eCredits Widget API</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>eCredits Widget API</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>The eCredits Widget API enables online Merchants to accept purchases with the eCredits Cryptocurrency (ECS) from their customers using the eCredits mobile eWallet App available for Android and iOS.</p>
<p>It acts as a backend for the WebWidget shop plugin component which can be integrated into various web shop systems like Magento, WooCommerce, or PrestaShop.</p>
<p>Basically the transaction flow comprises the following steps:</p>
<ol>
<li>Creation of the transaction request</li>
<li>Showing the generated QR code in the checkout page of the Merchant&#x27;s web shop</li>
<li>Polling for the status of the transaction request / waiting for the retrieval of a webhook notification upon successful settlement</li>
<li>Showing success screen, updating the Merchant&#x27;s order item (e.g. continue with shipping, etc.)</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>In order to use the API you first need to:</p>
<ol>
<li>Create a Business Profile in the eCredits Portal</li>
<li>Purchase a Business Subscription to make that profile active</li>
<li>Setup the eCredits Mobile Wallet for the profile by creating a Seed Phrase so an address is generated and funds can be collected there.</li>
<li>Set up an API key in the WebWidget section to be used for API authentication.</li>
</ol>
<p>Once all steps are completed you can authenticate and start creating transaction requests, check their status and eventually receive eCredits into your Business wallet.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="endpoints">Endpoints<a href="#endpoints" class="hash-link" aria-label="Direct link to Endpoints" title="Direct link to Endpoints">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="swagger">Swagger<a href="#swagger" class="hash-link" aria-label="Direct link to Swagger" title="Direct link to Swagger">​</a></h3>
<p>Test: <a href="https://widget.api.tst.ecredits.com/swagger/index.html" target="_blank" rel="noopener noreferrer">https://widget.api.tst.ecredits.com/swagger/index.html</a> <br>
<!-- -->Prod: <a href="https://widget.api.ecredits.com/swagger/index.html" target="_blank" rel="noopener noreferrer">https://widget.api.ecredits.com/swagger/index.html</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to Additional Resources" title="Direct link to Additional Resources">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esync-network-explorer">eSync Network Explorer<a href="#esync-network-explorer" class="hash-link" aria-label="Direct link to eSync Network Explorer" title="Direct link to eSync Network Explorer">​</a></h3>
<p>Web application to look up transaction hashes and wallet balances.</p>
<p>Test: <a href="https://explorer.tst.esync.network/" target="_blank" rel="noopener noreferrer">https://explorer.tst.esync.network/</a> <br>
<!-- -->Prod: <a href="https://explorer.esync.network" target="_blank" rel="noopener noreferrer">https://explorer.esync.network</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ecredits-widget-api-authentication">eCredits Widget API Authentication<a href="#ecredits-widget-api-authentication" class="hash-link" aria-label="Direct link to eCredits Widget API Authentication" title="Direct link to eCredits Widget API Authentication">​</a></h2>
<p>The eCredits Widget API uses JWT bearer tokens for API authentication.</p>
<p>To get a valid token a request with the following format must be sent to the <strong><em>authentication</em></strong> endpoint:</p>
<p><strong>Request:</strong></p>
<p><code>POST https://widget.api.tst.ecredits.com/api/authentication</code></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;secret&quot;: &quot;VLLXVHVU3BA1FNiwyEtv8CQTxpaCg6t3zcAu9q57vB7dMzghfubu8mUJwsZfhHnw&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;clientId&quot;: &quot;3fa85f34-5717-4562-b3fc-2c963f66afa7&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>REQUEST DATA:</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Mandatory</th><th>Description</th></tr></thead><tbody><tr><td>secret</td><td>string</td><td>yes</td><td>The API key created in eCredits Portal (Web Widget)</td></tr><tr><td>clientId</td><td>guid</td><td>yes</td><td>The ID of the business that should receive the funds</td></tr></tbody></table>
<p><strong>Response:</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;token&quot;: &quot;eyJhbGciOiJIU[...]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;expiresAt&quot;: &quot;2022-05-09T06:57:44.4906378+00:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>RESPONSE DATA:</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>token</td><td>string</td><td>The JWT bearer token to be used for subsequent requests</td></tr><tr><td>expiresAt</td><td>datetime (UTC)</td><td>The ID of the business that should receive the funds</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ecredits-widget-api---transaction-requests">eCredits Widget API - Transaction Requests<a href="#ecredits-widget-api---transaction-requests" class="hash-link" aria-label="Direct link to eCredits Widget API - Transaction Requests" title="Direct link to eCredits Widget API - Transaction Requests">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-transaction-request">Create a Transaction Request<a href="#create-a-transaction-request" class="hash-link" aria-label="Direct link to Create a Transaction Request" title="Direct link to Create a Transaction Request">​</a></h3>
<p>In order to create a transaction request whose QR code can be shown to the customer in the checkout process, and which can be paid with the eCredits eWallet App, a request similar to that below must be sent to the <strong><em>requests</em></strong> resource:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-transaction-request---request">Create Transaction Request - Request<a href="#create-transaction-request---request" class="hash-link" aria-label="Direct link to Create Transaction Request - Request" title="Direct link to Create Transaction Request - Request">​</a></h4>
<p><code>POST https://widget.api.ecredits.com/api/v1/requests</code></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;70df7B42-2926-4fa7-8fed-c5805f823167&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;amountDue&quot;: 99.99,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;currencyCode&quot;: &quot;EUR&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;paymentReference&quot;: &quot;OrderId123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;generateQrCode&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>REQUEST DATA:</strong></p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Mandatory</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>guid</td><td>yes</td><td>Unique identifier of the request</td></tr><tr><td>amountDue</td><td>decimal</td><td>yes</td><td>The requested amount the shop wants to receive from the Consumer</td></tr><tr><td>currencyCode</td><td>string(3)</td><td>yes</td><td>The code of the amountDue currency. Currently only ECS and EUR are supported. If set to EUR the conversion to ECS is done automatically</td></tr><tr><td>paymentReference</td><td>string</td><td>no</td><td>The Merchant&#x27;s reference to correlate the request and the paid transaction to the shop order item</td></tr><tr><td>generateQrCode</td><td>boolean</td><td>no (default false)</td><td>Defines whether a base64 encoded QR string should be returned that can be directly embedded into the checkout page</td></tr><tr><td>qrCodeType</td><td>string</td><td>no</td><td>&quot;Basic&quot; or &quot;HtmlEmbedded&quot;. Default is &quot;Basic&quot;. &quot;HtmlEmbedded&quot; returns the QR code rendered in a HTML element with additional styles and contextual text</td></tr><tr><td>testMode</td><td>boolean</td><td>no (default false)</td><td>Indicates whether the request is supposed to be paid on the eSync testnet. NOTE: in test mode no real funds are transferred and you must have a wallet on the eSync testnet to pay for such requests!</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-transaction-request---response">Create Transaction Request - Response<a href="#create-transaction-request---response" class="hash-link" aria-label="Direct link to Create Transaction Request - Response" title="Direct link to Create Transaction Request - Response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;70df7B42-2926-4fa7-8fed-c5805f823167&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;fiatCurrencyCode&quot;: &quot;EUR&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;fiatAmountDue&quot;: 99.99,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;amountDue&quot;: 9999,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;currencyCode&quot;: &quot;ECS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;qrCodeBase64&quot;: &quot;R0lGODlh+gD6APcAAAAA[..]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;qrCodeHtml&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;qrCodeString&quot;: &quot;eCreditsPayment:70df7B42-2926-4fa7-8fed-c5805f823167&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;href&quot;: &quot;https://auth.ecredits.com/payment?code=70df7B42-2926-4fa7-8fed-c5805f823167&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;paymentReference&quot;: &quot;OrderId123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;expiresAt&quot;: &quot;2022-05-09T06:11:30.4659728+00:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>RESPONSE DATA:</strong></p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>guid</td><td>Unique identifier of the request</td></tr><tr><td>amountDue</td><td>decimal</td><td>The requested amount the shop wants to receive from the Consumer</td></tr><tr><td>currencyCode</td><td>string(3)</td><td>The code of the amountDue currency. Currently only ECS and EUR are supported. If set to EUR the conversion to ECS is done automatically</td></tr><tr><td>fiatAmountDue</td><td>decimal</td><td>The amount the shop wants to receive from the shopper in fiat currency. Will return EUR in case currencyCode was sent with EUR upon request creation</td></tr><tr><td>fiatCurrencyCode</td><td>string(3)</td><td>Currency code of the fiat amount. Currently only is EUR supported. Will be set in case currencyCode was sent with EUR upon request creation</td></tr><tr><td>paymentReference</td><td>string</td><td>The Merchant&#x27;s reference to correlate the request and the paid transaction to the shop order item</td></tr><tr><td>qrCodeBase64</td><td>string</td><td>The string that is encoded in the QR code that is used by the WalletApp upon scanning. Can be used to create your own QR code</td></tr><tr><td>qrCodeHtml</td><td>string</td><td>Contains HTLM with QR code in case qrCodeType was set to &quot;HtmlEmbedded&quot;, null in case of &quot;Basic&quot;</td></tr><tr><td>href</td><td>string</td><td>Universal link to open the WalletApp on mobile devices as QR code cannot be scanned when browsing the checkout page on the same device</td></tr><tr><td>expiresAt</td><td>datetime</td><td>The timestamp after that the request will expire. In such case an entire new request with a new id should be created</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-the-status-of-transaction-requests">Check the status of Transaction Requests<a href="#check-the-status-of-transaction-requests" class="hash-link" aria-label="Direct link to Check the status of Transaction Requests" title="Direct link to Check the status of Transaction Requests">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="get-a-transaction-request-by-id">Get a Transaction Request by ID<a href="#get-a-transaction-request-by-id" class="hash-link" aria-label="Direct link to Get a Transaction Request by ID" title="Direct link to Get a Transaction Request by ID">​</a></h4>
<p><strong>Request:</strong></p>
<p><code>GET https://widget.api.ecredits.com/api/v1/requests/{id}?generateQrCode=true&amp;qrCodeType=HtmlEmbedded</code></p>
<p>Example: <code>https://widget.api.ecredits.com/api/v1/requests/70df7B42-2926-4fa7-8fed-c5805f823167?generateQrCode=true&amp;qrCodeType=HtmlEmbedded</code></p>
<p><strong>REQUEST DATA:</strong></p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Mandatory</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>guid</td><td>yes</td><td>The ID of the transaction request</td></tr><tr><td>generateQrCode</td><td>boolean</td><td>no (default false)</td><td>Defines whether a base64 encoded QR string should be returned that can be directly embedded into the checkout page</td></tr><tr><td>qrCodeType</td><td>string</td><td>no</td><td>&quot;Basic&quot; or &quot;HtmlEmbedded&quot;. &quot;HtmlEmbedded&quot; returns the QR code rendered in a HTML element with additional styles and contextual text</td></tr></tbody></table>
<p><strong>RESPONSE DATA:</strong></p>
<p>Same as for <a href="#create-transaction-request---response">Create Transaction Request Response</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="get-transactions-for-a-particular-request-by-id">Get transactions for a particular request by ID<a href="#get-transactions-for-a-particular-request-by-id" class="hash-link" aria-label="Direct link to Get transactions for a particular request by ID" title="Direct link to Get transactions for a particular request by ID">​</a></h4>
<p>Allows to retrieve all successful transactions created for a particular transaction request. Usually one transaction per request, however user may send a transaction twice by mistake. The Merchant can create a refund in such situations in the eCredits Web Portal or via the eCredits eWallet App to compensate such overpayments.</p>
<p><strong>Request:</strong></p>
<p><code>GET https://widget.api.ecredits.com/api/v1/requests/{id}/payments</code></p>
<p>Example: <code>GET https://widget.api.ecredits.com/api/v1/requests/70df7B42-2926-4fa7-8fed-c5805f823167/payments</code></p>
<p>REQUEST DATA:</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Mandatory</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>guid</td><td>yes</td><td>The ID of the transaction request</td></tr></tbody></table>
<p><strong>Response:</strong></p>
<p>A string list of transaction hashes (can be looked up in eSync Network Explorer).</p>
<p><strong>RESPONSE DATA:</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[&quot;Hash1&quot;, &quot;Hash2&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="check-if-transaction-request-is-paid">Check if transaction request is paid<a href="#check-if-transaction-request-is-paid" class="hash-link" aria-label="Direct link to Check if transaction request is paid" title="Direct link to Check if transaction request is paid">​</a></h4>
<p>Gives a quick indication whether the transaction request is successfully paid by at least one transaction.</p>
<p><strong>Request:</strong></p>
<p><code>GET https://widget.api.ecredits.com/api/v1/requests/{id}/paid</code></p>
<p>Example: <code>GET https://widget.api.ecredits.com/api/v1/requests/70df7B42-2926-4fa7-8fed-c5805f823167/paid</code></p>
<p><strong>REQUEST DATA:</strong></p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Mandatory</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>guid</td><td>yes</td><td>The ID of the transaction request</td></tr></tbody></table>
<p><strong>Response:</strong></p>
<p>A boolean indicating successful transaction/settlement of a particular transaction request.</p>
<p><strong>RESPONSE DATA:</strong></p>
<p><code>true</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="webhooks">Webhooks<a href="#webhooks" class="hash-link" aria-label="Direct link to Webhooks" title="Direct link to Webhooks">​</a></h3>
<p>eCredits supports webhook notifications to allow Merchants to subscribe for <strong>successfully paid</strong> requests (push) in order to not having all pending requests queried from the eCredits API for the last status (pull).</p>
<p>Upon successful settlement of a request there will be a webhook request sent to the shops webhook url in case such a url is configured (must to be set up and configured in the eCredits Web Portal).</p>
<p><code>POST https://merchant.com/path/to/webhook</code></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;requestId&quot;: &quot;70df7B42-2926-4fa7-8fed-c5805f823167&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;transactionHash&quot;: &quot;0x9c81985ce77c8e9990d854460d14462cd1737136df66efd17f31cdba66e41963&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;signature&quot;: &quot;YWVeYXagBM11lOxqEp09PYt8IskwjKTf+tYNoVjniFs=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;testMode&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>REQUEST DATA:</strong></p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>requestId</td><td>guid</td><td>The id of the transaction request</td></tr><tr><td>status</td><td>int</td><td>The status code of the transaction request. Possible values are: Pending (0), Settled (1), Expired(2)</td></tr><tr><td>testMode</td><td>boolean</td><td>Whether the request was created and paid on the eSync testnet. If true no real funds were transferred.</td></tr></tbody></table>
<p>The possible status codes of a request are listed below:</p>
<table><thead><tr><th>Status</th><th>Code</th><th>Description</th></tr></thead><tbody><tr><td>Pending</td><td>0</td><td>The request has not been fully paid yet successfully</td></tr><tr><td>Settled</td><td>1</td><td>The request is paid successfully</td></tr><tr><td>Expired</td><td>2</td><td>The request was not paid in time and is expired. A new transaction request should be created if the web shop order is still supposed to be paid</td></tr></tbody></table>
<p>The webhook page should return a HTTP 200 OK response to indicate it received and processed the notification properly. Failing to do so we reschedule the notification several times until successful response with increasing time interval between the single attempts.</p>
<blockquote>
<p><strong>WARNING</strong>: Please note that due to this retry-behavior and for client simplicity it is important that the webhook page should have an idempotent behavior be prepared for multiple notifications for the same id!</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="validation-of-webhook-requests">Validation of webhook requests<a href="#validation-of-webhook-requests" class="hash-link" aria-label="Direct link to Validation of webhook requests" title="Direct link to Validation of webhook requests">​</a></h3>
<p>The Merchant is responsible for validating the received webhook notification for authenticity (to guarantee the request originates from eCredits). To do so,the HMAC256 value of the request id should be calculated via the signing secret (configured in the eCredits Portal when setting up the webhook) and compared to value embedded in the request.</p>
<p>It is recommended to not solely rely on the status of the webhook request, instead the request details can be queried once more from the API.</p>
<p>An example method to calculate the HMAC256 value of the webhook request in C# can be found below:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private static string CalcHmac256(string text, string key)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       using (var hmacSha256 = new HMACSHA256(Encoding.UTF8.GetBytes(key)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             var hash = hmacSha256.ComputeHash(Encoding.UTF8.GetBytes(text.ToLowerInvariant()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             return Convert.ToBase64String(hash);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Assert.Equal(request.signature, CalcHmac256(request.id, &quot;TheSigningSecretOfTheWebHook&quot;));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/developer-docs/erc-20"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create an ERC-20 Token</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/developer-docs/smart-contract-analysis-tools"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Smart Contract Analysis Tools</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#endpoints" class="table-of-contents__link toc-highlight">Endpoints</a><ul><li><a href="#swagger" class="table-of-contents__link toc-highlight">Swagger</a></li></ul></li><li><a href="#additional-resources" class="table-of-contents__link toc-highlight">Additional Resources</a><ul><li><a href="#esync-network-explorer" class="table-of-contents__link toc-highlight">eSync Network Explorer</a></li></ul></li><li><a href="#ecredits-widget-api-authentication" class="table-of-contents__link toc-highlight">eCredits Widget API Authentication</a></li><li><a href="#ecredits-widget-api---transaction-requests" class="table-of-contents__link toc-highlight">eCredits Widget API - Transaction Requests</a><ul><li><a href="#create-a-transaction-request" class="table-of-contents__link toc-highlight">Create a Transaction Request</a></li><li><a href="#check-the-status-of-transaction-requests" class="table-of-contents__link toc-highlight">Check the status of Transaction Requests</a></li><li><a href="#webhooks" class="table-of-contents__link toc-highlight">Webhooks</a></li><li><a href="#validation-of-webhook-requests" class="table-of-contents__link toc-highlight">Validation of webhook requests</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Jump to</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/ecosystem/real-world-use-cases/ecredits">eCredits</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools/metamask">Metamask</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/esyncnetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/eSync_Network" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://esync.medium.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/esync_network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://esync.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">eSync Network Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://explorer.esync.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Block Explorer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 eSync Network</div></div></div></footer></div>
</body>
</html>